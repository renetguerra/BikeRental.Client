<!-- Modern Header Section -->
<div class="bikes-header mb-4">
  <div class="container">
    <div class="header-content">
      <div class="header-text">
        <h1 class="bikes-title">{{ 'bikeList.header.title' | transloco }}</h1>
        <p class="bikes-subtitle">{{ 'bikeList.header.subtitle' | transloco }}</p>
      </div>
      <div class="bikes-count">
        <span class="count-number">{{ bikes()?.length || 0 }}</span>
        <span class="count-label">{{ 'bikeList.header.countLabel' | transloco }}</span>
      </div>
    </div>
  </div>
</div>

<!-- Modern Filter Section -->
@if (bikeParams() !== null && bikeParams() !== undefined) {
<div class="section mb-4">
  <div class="container">
    <div class="filters-card">
      <form
        #form="ngForm"
        class="filters-form"
        (ngSubmit)="applyFilters()"
        autocomplete="off">

        <div class="filters-grid">
          <!-- Type Filter -->
          <div class="filter-group">
            <span class="filter-label">{{ 'bikeList.filters.type' | transloco }}</span>
            <div class="filter-input-wrapper">
              <input
                type="text"
                class="filter-input"
                name="type"
                [ngModel]="bikeParams() && bikeParams()!.type"
                (ngModelChange)="bikeParams() && (bikeParams()!.type = $event)"
              />
            </div>
          </div>

          <!-- Model Filter -->
          <div class="filter-group">
            <span class="filter-label">{{ 'bikeList.filters.model' | transloco }}</span>
            <div class="filter-input-wrapper">
              <input
                type="text"
                class="filter-input"
                name="model"
                [ngModel]="bikeParams() && bikeParams()!.model"
                (ngModelChange)="bikeParams() && (bikeParams()!.model = $event)" />
            </div>
          </div>

          <!-- Brand Filter -->
          <div class="filter-group">
            <span class="filter-label">{{ 'bikeList.filters.brand' | transloco }}</span>
            <div class="filter-input-wrapper">
              <input
                type="text"
                class="filter-input"
                name="brand"
                [ngModel]="bikeParams() && bikeParams()!.brand"
                (ngModelChange)="bikeParams() && (bikeParams()!.brand = $event)" />
            </div>
          </div>

          <!-- Year Filter -->
          <div class="filter-group">
            <span class="filter-label">{{ 'bikeList.filters.year' | transloco }}</span>
            <div class="filter-input-wrapper">
              <select
                name="year"
                class="filter-select"
                [ngModel]="bikeParams()!.year"
                (ngModelChange)="bikeParams() && (bikeParams()!.year = $event)">
                <option value="0">{{ 'bikeList.filters.allYears' | transloco }}</option>
                @for (bikeYear of bikeYears; track bikeYear.value) {
                <option [ngValue]="bikeYear.value">{{ bikeYear.value }}</option>
                }
              </select>
            </div>
          </div>

          <!-- Price Range -->
          <div class="filter-group">
            <span class="filter-label">{{ 'bikeList.filters.priceRange' | transloco }}</span>
            <div class="price-range">
              <input
                type="number"
                class="filter-input price-input"
                name="minPrice"
                placeholder="{{ 'bikeList.filters.min' | transloco }}"
                [ngModel]="bikeParams() && bikeParams()!.minPrice"
                (ngModelChange)="bikeParams() && (bikeParams()!.minPrice = $event)" />
              <span class="price-separator">-</span>
              <input
                type="number"
                class="filter-input price-input"
                name="maxPrice"
                placeholder="{{ 'bikeList.filters.max' | transloco }}"
                [ngModel]="bikeParams() && bikeParams()!.maxPrice"
                (ngModelChange)="bikeParams() && (bikeParams()!.maxPrice = $event)" />
            </div>
          </div>

          <!-- Availability Toggle -->
          <div class="filter-group availability-group">
            <span class="filter-label">{{ 'bikeList.filters.availability' | transloco }}</span>
            <div class="availability-toggle">
              <mat-slide-toggle
                [(ngModel)]="bikeParams()!.isAvailable"
                name="isAvailable"
                class="modern-toggle">
                <span class="switch-text">{{ 'bikeList.filters.availableOnly' | transloco }}</span>
              </mat-slide-toggle>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="filter-actions">
          <button class="btn-apply" type="submit">{{ 'bikeList.filters.apply' | transloco }}</button>
          <button class="btn-reset" type="button" (click)="resetFilters()">{{ 'bikeList.filters.reset' | transloco }}</button>
        </div>
      </form>

      <!-- Sort Options -->
      <div class="sort-section">
        <span class="sort-label">{{ 'bikeList.sort.label' | transloco }}</span>
        <div class="sort-buttons">
          <button
            type="button"
            class="sort-btn"
            [class.active]="bikeParams()!.orderBy === 'type'"
            (click)="setOrderBy('type')">
            {{ 'bikeList.sort.type' | transloco }}
          </button>
          <button
            type="button"
            class="sort-btn"
            [class.active]="bikeParams()!.orderBy === 'model'"
            (click)="setOrderBy('model')">
            {{ 'bikeList.sort.model' | transloco }}
          </button>
          <button
            type="button"
            class="sort-btn"
            [class.active]="bikeParams()!.orderBy === 'brand'"
            (click)="setOrderBy('brand')">
            {{ 'bikeList.sort.brand' | transloco }}
          </button>
          <button
            type="button"
            class="sort-btn"
            [class.active]="bikeParams()!.orderBy === 'price'"
            (click)="setOrderBy('price')">
            {{ 'bikeList.sort.price' | transloco }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
}

<!-- Modern Bikes Grid -->
<div class="section">
  <div class="container">
    <div class="bikes-grid">
      @for (bike of bikes(); track bike.id) {
        <app-bike-card [bike]="bike"></app-bike-card>
      }
    </div>

    <!-- No Results Message -->
    @if (bikes().length === 0) {
      <div class="no-results">
        <div class="no-results-icon">üö¥‚Äç‚ôÇÔ∏è</div>
        <h3>{{ 'bikeList.grid.noResultsTitle' | transloco }}</h3>
        <p>{{ 'bikeList.grid.noResultsDesc' | transloco }}</p>
      </div>
    }

    <!-- Modern Pagination -->
    @if (pagination()) {
    <div class="pagination-section">
      <div class="container">
        <div class="d-flex justify-content-center">
          <mat-paginator
            [length]="pagination()!.totalItems || 0"
            [pageSize]="pagination()?.itemsPerPage || 5"
            [pageIndex]="(pagination()?.currentPage || 1) - 1"
            [pageSizeOptions]="[5, 10, 20, 50]"
            [showFirstLastButtons]="true"
            (page)="onPageChanged($event)"
            class="modern-mat-paginator">
          </mat-paginator>
        </div>
      </div>
    </div>
    }
  </div>
</div>

<!-- Modern Pagination -->
<!-- @if (pagination()) {
<div class="pagination-section">
  <div class="container">
    <pagination-controls
      class="modern-pagination"
      (pageChange)="pageChanged($event)">
    </pagination-controls>
  </div>
</div>
} -->
