<!-- Modern Header Section -->
<div class="bikes-header">
  <div class="container">
    <div class="header-content">
      <div class="header-text">
        <h1 class="bikes-title">Available Bikes</h1>
        <p class="bikes-subtitle">Explore our wide selection of bikes for rent. Find the perfect ride for your next adventure.</p>
      </div>
      <div class="bikes-count">
        <span class="count-number">{{ bikes()?.length || 0 }}</span>
        <span class="count-label">Bikes Found</span>
      </div>
    </div>
  </div>
</div>

<!-- Modern Filter Section -->
@if (bikeParams() !== null && bikeParams() !== undefined) {
<div class="filters-section">
  <div class="container">
    <div class="filters-card">
      <form
        #form="ngForm"
        class="filters-form"
        (ngSubmit)="applyFilters()"
        autocomplete="off">

        <div class="filters-grid">
          <!-- Type Filter -->
          <div class="filter-group">
            <span class="filter-label">Type</span>
            <div class="filter-input-wrapper">
              <input
                type="text"
                class="filter-input"
                name="type"
                [ngModel]="bikeParams() && bikeParams()?.type"
                (ngModelChange)="bikeParams() && (bikeParams()!.type = $event)"
              />
            </div>
          </div>

          <!-- Model Filter -->
          <div class="filter-group">
            <span class="filter-label">Model</span>
            <div class="filter-input-wrapper">
              <input
                type="text"
                class="filter-input"
                name="model"
                [ngModel]="bikeParams() && bikeParams()?.model"
                (ngModelChange)="bikeParams() && (bikeParams()!.model = $event)" />
            </div>
          </div>

          <!-- Brand Filter -->
          <div class="filter-group">
            <span class="filter-label">Brand</span>
            <div class="filter-input-wrapper">
              <input
                type="text"
                class="filter-input"
                name="brand"
                [ngModel]="bikeParams() && bikeParams()?.brand"
                (ngModelChange)="bikeParams() && (bikeParams()!.brand = $event)" />
            </div>
          </div>

          <!-- Year Filter -->
          <div class="filter-group">
            <span class="filter-label">Year</span>
            <div class="filter-input-wrapper">
              <select
                name="year"
                class="filter-select"
                [ngModel]="bikeParams()?.year"
                (ngModelChange)="bikeParams() && (bikeParams()!.year = $event)">
                <option value="0">All Years</option>
                @for (bikeYear of bikeYears; track bikeYear.value) {
                <option [ngValue]="bikeYear.value">{{ bikeYear.value }}</option>
                }
              </select>
            </div>
          </div>

          <!-- Price Range -->
          <div class="filter-group">
            <span class="filter-label">Price Range</span>
            <div class="price-range">
              <input
                type="number"
                class="filter-input price-input"
                name="minPrice"
                placeholder="Min"
                [ngModel]="bikeParams() && bikeParams()?.minPrice"
                (ngModelChange)="bikeParams() && (bikeParams()!.minPrice = $event)" />
              <span class="price-separator">-</span>
              <input
                type="number"
                class="filter-input price-input"
                name="maxPrice"
                placeholder="Max"
                [ngModel]="bikeParams() && bikeParams()?.maxPrice"
                (ngModelChange)="bikeParams() && (bikeParams()!.maxPrice = $event)" />
            </div>
          </div>

          <!-- Availability Toggle -->
          <div class="filter-group availability-group">
            <span class="filter-label">Availability</span>
            <div class="availability-toggle">
              <mat-slide-toggle
                [(ngModel)]="bikeParams()!.isAvailable"
                name="isAvailable"
                class="modern-toggle">
                <span class="switch-text">Available Only</span>
              </mat-slide-toggle>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="filter-actions">
          <button class="btn-apply" type="submit">Apply Filters</button>
          <button class="btn-reset" type="button" (click)="resetFilters()">Reset</button>
        </div>
      </form>

      <!-- Sort Options -->
      <div class="sort-section">
        <span class="sort-label">Sort by:</span>
        <div class="sort-buttons">
          <button
            type="button"
            class="sort-btn"
            [class.active]="bikeParams()?.orderBy === 'type'"
            (click)="setOrderBy('type')">
            Type
          </button>
          <button
            type="button"
            class="sort-btn"
            [class.active]="bikeParams()?.orderBy === 'model'"
            (click)="setOrderBy('model')">
            Model
          </button>
          <button
            type="button"
            class="sort-btn"
            [class.active]="bikeParams()?.orderBy === 'brand'"
            (click)="setOrderBy('brand')">
            Brand
          </button>
          <button
            type="button"
            class="sort-btn"
            [class.active]="bikeParams()?.orderBy === 'price'"
            (click)="setOrderBy('price')">
            Price
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
}

<!-- Modern Bikes Grid -->
<div class="bikes-section">
  <div class="container">
    <div class="bikes-grid">
      @for (bike of bikes() | paginate: { itemsPerPage: pagination()?.itemsPerPage, currentPage: pagination()?.currentPage, totalItems: pagination()?.totalItems }; track bike.id) {
        <app-bike-card [bike]="bike"></app-bike-card>
      }
    </div>

    <!-- No Results Message -->
    @if (bikes().length === 0) {
      <div class="no-results">
        <div class="no-results-icon">üö¥‚Äç‚ôÇÔ∏è</div>
        <h3>No bikes found</h3>
        <p>Try adjusting your filters to see more results.</p>
      </div>
    }
  </div>
</div>

<!-- Modern Pagination -->
@if (pagination()) {
<div class="pagination-section">
  <div class="container">
    <pagination-controls
      class="modern-pagination"
      (pageChange)="pageChanged($event)">
    </pagination-controls>
  </div>
</div>
}
