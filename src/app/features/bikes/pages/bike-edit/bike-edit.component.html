@if (!bike()) {
  <div class="text-center">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
    <p>Loading bike data...</p>
  </div>
} @else {
<div class="modern-bike-detail">
  <div class="container">
    <div class="max-w-4xl mx-auto">
  <h1 class="page-title">Edit Bike</h1>

      @if (editForm?.dirty) {
      <div class="alert alert-info mb-4">
        <p>
          <strong>Info: </strong>You have made changes. Any unsaved changes will be lost.
        </p>
      </div>
      }

      <!-- Tabs Section -->
      <div class="tabs-container">
        <!-- Tab Content -->
        <div class="tab-content">
          <!-- Info Tab -->
            <form #editForm="ngForm" id="editForm">

              <!-- Bike Information Card -->
              <div class="info-card">
                <h2 class="card-title">Bike Information</h2>
                <div class="bike-details">
                  <div class="detail-row">
                    <div class="detail-group">
                      <div class="detail-text">
                        <span class="detail-label">Brand:</span>
                        <input
                          type="text"
                          name="brand"
                          class="detail-input"
                          [(ngModel)]="bike()!.brand"
                          placeholder="Enter brand">
                      </div>
                    </div>
                    <div class="detail-group">
                      <div class="detail-text">
                        <span class="detail-label">Model:</span>
                        <input
                          type="text"
                          name="model"
                          class="detail-input"
                          [(ngModel)]="bike()!.model"
                          placeholder="Enter model">
                      </div>
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-group">
                      <div class="detail-text">
                        <span class="detail-label">Type:</span>
                        <select
                          name="type"
                          class="detail-input"
                          [(ngModel)]="bike()!.type">
                          <option value="">Select type</option>
                          <option value="Mountain">Mountain</option>
                          <option value="Road">Road</option>
                          <option value="Electric">Electric</option>
                          <option value="Hybrid">Hybrid</option>
                          <option value="BMX">BMX</option>
                        </select>
                      </div>
                    </div>
                    <div class="detail-group">
                      <div class="detail-text">
                        <span class="detail-label">Year:</span>
                        <input
                          type="number"
                          name="year"
                          class="detail-input"
                          [(ngModel)]="bike()!.year"
                          placeholder="2024"
                          min="1990"
                          max="2030">
                      </div>
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-group">
                      <div class="detail-text">
                        <span class="detail-label">Price per day:</span>
                        <input
                          type="number"
                          name="price"
                          class="detail-input"
                          [(ngModel)]="bike()!.price"
                          placeholder="25.00"
                          step="0.01"
                          min="0">
                      </div>
                    </div>
                    <div class="detail-group">
                      <div class="detail-text">
                        <span class="detail-label">Available:</span>
                        <select
                          name="isAvailable"
                          class="detail-input"
                          [(ngModel)]="bike()!.isAvailable">
                          <option [ngValue]="true">Available</option>
                          <option [ngValue]="false">Not available</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="detail-row detail-row-full">
                    <div class="detail-group detail-group-full">
                      <div class="detail-text">
                        <span class="detail-label">Notes:</span>
                        <textarea
                          name="notes"
                          class="detail-input detail-textarea-large"
                          placeholder="Additional notes about the bike..."
                          rows="4"></textarea>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Save Changes Button for Bike Information -->
                <div class="card-actions">
                  <button
                    type="button"
                    (click)="updateBike()"
                    class="primary-btn"
                    [disabled]="!editForm?.dirty">
                    <mat-icon>save</mat-icon>
                    Save Bike Information
                  </button>
                </div>
              </div>

              <!-- Main Image of the Card -->
              <div class="info-card">
                <h2 class="card-title">Main Image</h2>
                <div class="profile-upload-section">
                  <div class="profile-avatar">
                    <img
                      [src]="bike()?.photoUrl || './assets/user.png'"
                      [alt]="bike()?.brand + ' ' + bike()?.model"
                      class="avatar-image"/>
                  </div>
                  <div class="upload-controls">
                    <button type="button" class="primary-btn" (click)="openDialogAddPhoto()">
                      <mat-icon>add_a_photo</mat-icon>
                      Manage Photos
                    </button>
                    <p class="upload-hint">PNG, JPG, GIF up to 10MB.</p>
                  </div>
                </div>
              </div>

            </form>
        </div>
      </div>
    </div>
  </div>
</div>
}
